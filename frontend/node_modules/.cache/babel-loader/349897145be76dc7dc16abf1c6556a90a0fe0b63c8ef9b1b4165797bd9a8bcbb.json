{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, withKeys as _withKeys, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"span\", null, \"Minha Authority é:\", -1 /* HOISTED */);\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"span\", null, \" Meu nome é: \", -1 /* HOISTED */);\nconst _hoisted_3 = [\"disabled\"];\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_table = _resolveComponent(\"el-table\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"b\", null, _toDisplayString($data.myAuthority), 1 /* TEXT */), _hoisted_2, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.myName = $event),\n    disabled: $data.isConnected\n  }, null, 8 /* PROPS */, _hoisted_3), [[_vModelText, $data.myName]]), _createTextVNode(\" button(@click=\\\"connect\\\", :disabled='isConnected') Conectar \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, message => {\n    return _openBlock(), _createBlock(_component_el_table, null, {\n      default: _withCtx(() => [_createElementVNode(\"span\", null, _toDisplayString(message.time) + \" - \", 1 /* TEXT */), _createElementVNode(\"span\", null, _toDisplayString(message.from === $data.myName ? 'eu' : message.from) + \": \", 1 /* TEXT */), _createElementVNode(\"span\", null, _toDisplayString(message.content), 1 /* TEXT */)]),\n\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */);\n  }), 256 /* UNKEYED_FRAGMENT */)), _hoisted_4, _hoisted_5, _hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.newMessage = $event),\n    onKeypress: _cache[2] || (_cache[2] = _withKeys((...args) => $options.sendNewMessage && $options.sendNewMessage(...args), [\"enter\"])),\n    disabled: !$data.isConnected\n  }, null, 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_7), [[_vModelText, $data.newMessage]]), _createElementVNode(\"button\", {\n    action: \"sendNewMessage\",\n    disabled: !$data.isConnected\n  }, \" Enviar \", 8 /* PROPS */, _hoisted_8)]);\n}","map":{"version":3,"mappings":";gCAGQA,oBAA+B,cAAzB,oBAAkB;gCAGxBA,oBAA0B,cAApB,eAAa;;gCASnBA,oBAAI;gCACJA,oBAAI;gCACJA,oBAAI;;;;;uBAhBZC,oBAmBM,cAjBEC,UAA+B,EAC/BF,oBAA0B,4BAAnBG,iBAAW,kBAElBC,UAA0B,kBAC1BJ,oBAA6D;IAAtDK,IAAI,EAAC,MAAM;+DAAUF,YAAM;IAAGG,QAAQ,EAAEH;sDAAnBA,YAAM,sBAA2B,gEAGjE,0CAIWI,6BAJiBJ,cAAQ,EAAnBK,OAAO;yBAAxBC,aAIWC;wBAHP,MAAmC,CAAnCV,oBAAmC,+BAAzBQ,OAAO,CAACG,IAAI,IAAG,KAAG,iBAC5BX,oBAAkE,+BAAzDQ,OAAO,CAACI,IAAI,KAAKT,YAAM,UAAUK,OAAO,CAACI,IAAI,IAAG,IAAE,iBAC3DZ,oBAAmC,+BAA1BQ,OAAO,CAACK,OAAO;;;;oCAExBC,UAAI,EACJC,UAAI,EACJC,UAAI,kBACJhB,oBAAuF;+DAAvEG,gBAAU;IAAGc,UAAQ,mDAAQC,2DAAc;IAAGZ,QAAQ,GAAGH;uEAAzDA,gBAAU,KAC1BH,oBAA0E;IAAlEmB,MAAM,EAAC,gBAAgB;IAAEb,QAAQ,GAAGH;KAAa,UAAQ","names":["_createElementVNode","_createElementBlock","_hoisted_1","$data","_hoisted_2","type","disabled","_Fragment","message","_createBlock","_component_el_table","time","from","content","_hoisted_4","_hoisted_5","_hoisted_6","onKeypress","$options","action"],"sourceRoot":"","sources":["C:\\app\\137-tech\\radio-web\\radio-web\\frontend\\src\\components\\Chat.vue"],"sourcesContent":["<template>\r\n<div>\r\n    \r\n        <span>Minha Authority é:</span>\r\n        <b> {{ myAuthority }} </b>\r\n\r\n        <span> Meu nome é: </span>\r\n        <input type='text' v-model='myName' :disabled='isConnected'/>\r\n        button(@click=\"connect\", :disabled='isConnected') Conectar\r\n        \r\n    <el-table v-for=\"message in messages\">\r\n        <span> {{ message.time }} - </span> \r\n        <span>{{ message.from === myName ? 'eu' : message.from }}: </span>\r\n        <span>{{ message.content }} </span>\r\n    </el-table>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <input v-model=\"newMessage\" @keypress.enter=\"sendNewMessage\" :disabled=\"!isConnected\"/>\r\n        <button action=\"sendNewMessage\" :disabled=\"!isConnected\"> Enviar </button>\r\n</div>        \r\n</template>\r\n\r\n<script>\r\nimport { notify } from '@/services/ChatService';\r\nimport { subscribe } from '@/utils/websocket';\r\n//import { getMyAuthority } from '@/utils/security.util';\r\n\r\nexport default {\r\n    name: 'Home',\r\n    data(){\r\n        return {\r\n            //myAuthority: getMyAuthority(),\r\n            myAuthority: 'User',\r\n            myName: '',\r\n            messages: [],\r\n            newMessage: '',\r\n            isConnected: false\r\n        };\r\n    }, \r\n    methods: {\r\n        connect(){\r\n            subscribe('/message.new', (message) => {\r\n                this.messages.push(message);\r\n            });\r\n            this.isConnected = true;\r\n        },\r\n        sendNewMessage(){\r\n            console.log('Todas as Mensagens:', this.messages);\r\n            notify({\r\n                name: this.myName,\r\n                authority: this.myAuthority,\r\n                message: this.newMessage\r\n            }).then(() => {\r\n                console.log('retorno?', this.newMessage);\r\n                this.messages.push(this.newMessage);\r\n                this.newMessage = '';\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}