{"ast":null,"code":"import { defineComponent, openBlock, createBlock, Transition, mergeProps, unref, toHandlers, withCtx, renderSlot } from 'vue';\nimport '../../../hooks/index.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nconst __default__ = defineComponent({\n  name: \"ElCollapseTransition\"\n});\nconst _sfc_main = /* @__PURE__ */defineComponent({\n  ...__default__,\n  setup(__props) {\n    const ns = useNamespace(\"collapse-transition\");\n    const reset = el => {\n      el.style.maxHeight = \"\";\n      el.style.overflow = el.dataset.oldOverflow;\n      el.style.paddingTop = el.dataset.oldPaddingTop;\n      el.style.paddingBottom = el.dataset.oldPaddingBottom;\n    };\n    const on = {\n      beforeEnter(el) {\n        if (!el.dataset) el.dataset = {};\n        el.dataset.oldPaddingTop = el.style.paddingTop;\n        el.dataset.oldPaddingBottom = el.style.paddingBottom;\n        if (el.style.height) el.dataset.elExistsHeight = el.style.height;\n        el.style.maxHeight = 0;\n        el.style.paddingTop = 0;\n        el.style.paddingBottom = 0;\n      },\n      enter(el) {\n        requestAnimationFrame(() => {\n          el.dataset.oldOverflow = el.style.overflow;\n          if (el.dataset.elExistsHeight) {\n            el.style.maxHeight = el.dataset.elExistsHeight;\n          } else if (el.scrollHeight !== 0) {\n            el.style.maxHeight = `${el.scrollHeight}px`;\n          } else {\n            el.style.maxHeight = 0;\n          }\n          el.style.paddingTop = el.dataset.oldPaddingTop;\n          el.style.paddingBottom = el.dataset.oldPaddingBottom;\n          el.style.overflow = \"hidden\";\n        });\n      },\n      afterEnter(el) {\n        el.style.maxHeight = \"\";\n        el.style.overflow = el.dataset.oldOverflow;\n      },\n      enterCancelled(el) {\n        reset(el);\n      },\n      beforeLeave(el) {\n        if (!el.dataset) el.dataset = {};\n        el.dataset.oldPaddingTop = el.style.paddingTop;\n        el.dataset.oldPaddingBottom = el.style.paddingBottom;\n        el.dataset.oldOverflow = el.style.overflow;\n        el.style.maxHeight = `${el.scrollHeight}px`;\n        el.style.overflow = \"hidden\";\n      },\n      leave(el) {\n        if (el.scrollHeight !== 0) {\n          el.style.maxHeight = 0;\n          el.style.paddingTop = 0;\n          el.style.paddingBottom = 0;\n        }\n      },\n      afterLeave(el) {\n        reset(el);\n      },\n      leaveCancelled(el) {\n        reset(el);\n      }\n    };\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(Transition, mergeProps({\n        name: unref(ns).b()\n      }, toHandlers(on)), {\n        default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n        _: 3\n      }, 16, [\"name\"]);\n    };\n  }\n});\nvar CollapseTransition = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"collapse-transition.vue\"]]);\nexport { CollapseTransition as default };","map":{"version":3,"mappings":";;;;mCASc;EACZA,IAAM;AACR;;;;IAEM,WAAKC,aAAa,qBAAqB;IAEvC,cAASC,EAAwB;MACrCA,GAAGC,MAAMC,SAAY;MAClBF,SAAMG,QAAW,MAAGC,OAAQ;MAC5BJ,SAAMK,UAAa,MAAGD,OAAQ;MAC9BJ,SAAMM,aAAgB,MAAGF,OAAQ;IAAA,CACtC;IAEA,MAAMG,EAAK;MACTC,YAAYR,EAAqB;QAC/B,IAAI,CAACA,EAAG,UAASA,GAAGI,UAAU,EAAC;QAE5BJ,WAAQS,aAAgB,MAAGR,KAAM;QACjCD,WAAQU,gBAAmB,MAAGT,KAAM;QACvC,IAAID,GAAGC,KAAM,SAAWD,WAAQW,cAAiB,MAAGV,KAAM;QAE1DD,GAAGC,MAAMC,SAAY;QACrBF,GAAGC,MAAMI,UAAa;QACtBL,GAAGC,MAAMK,aAAgB;MAAA,CAC3B;MAEAM,MAAMZ,EAAqB;QACzBa,sBAAsB,MAAM;UACvBb,WAAQc,WAAc,MAAGb,KAAM;UAC9B,OAAGG,QAAQO,cAAgB;YAC1BX,SAAME,SAAY,MAAGE,OAAQ;UAAA,CAClC,UAAWJ,EAAG,kBAAiB,CAAG;YAC7BA,SAAME,SAAY,MAAGF,EAAG;UAAA,CACtB;YACLA,GAAGC,MAAMC,SAAY;UAAA;UAGpBF,SAAMK,UAAa,MAAGD,OAAQ;UAC9BJ,SAAMM,aAAgB,MAAGF,OAAQ;UACpCJ,GAAGC,MAAME,QAAW;QAAA,CACrB;MAAA,CACH;MAEAY,WAAWf,EAAqB;QAC9BA,GAAGC,MAAMC,SAAY;QAClBF,SAAMG,QAAW,MAAGC,OAAQ;MAAA,CACjC;MAEAY,eAAehB,EAAqB;QAClCiB,MAAMjB,EAAE;MAAA,CACV;MAEAkB,YAAYlB,EAAqB;QAC/B,IAAI,CAACA,EAAG,UAASA,GAAGI,UAAU,EAAC;QAC5BJ,WAAQS,aAAgB,MAAGR,KAAM;QACjCD,WAAQU,gBAAmB,MAAGT,KAAM;QACpCD,WAAQc,WAAc,MAAGb,KAAM;QAE/BD,SAAME,SAAY,MAAGF,EAAG;QAC3BA,GAAGC,MAAME,QAAW;MAAA,CACtB;MAEAgB,MAAMnB,EAAqB;QACrB,OAAGoB,iBAAiB,CAAG;UACzBpB,GAAGC,MAAMC,SAAY;UACrBF,GAAGC,MAAMI,UAAa;UACtBL,GAAGC,MAAMK,aAAgB;QAAA;MAC3B,CACF;MAEAe,WAAWrB,EAAqB;QAC9BiB,MAAMjB,EAAE;MAAA,CACV;MAEAsB,eAAetB,EAAqB;QAClCiB,MAAMjB,EAAE;MAAA;IACV,CACF","names":["name","useNamespace","el","style","maxHeight","overflow","dataset","paddingTop","paddingBottom","on","beforeEnter","oldPaddingTop","oldPaddingBottom","elExistsHeight","enter","requestAnimationFrame","oldOverflow","afterEnter","enterCancelled","reset","beforeLeave","leave","scrollHeight","afterLeave","leaveCancelled"],"sources":["../../../../../../packages/components/collapse-transition/src/collapse-transition.vue"],"sourcesContent":["<template>\n  <transition :name=\"ns.b()\" v-on=\"on\">\n    <slot />\n  </transition>\n</template>\n<script lang=\"ts\" setup>\nimport { useNamespace } from '@element-plus/hooks'\nimport type { RendererElement } from '@vue/runtime-core'\n\ndefineOptions({\n  name: 'ElCollapseTransition',\n})\n\nconst ns = useNamespace('collapse-transition')\n\nconst reset = (el: RendererElement) => {\n  el.style.maxHeight = ''\n  el.style.overflow = el.dataset.oldOverflow\n  el.style.paddingTop = el.dataset.oldPaddingTop\n  el.style.paddingBottom = el.dataset.oldPaddingBottom\n}\n\nconst on = {\n  beforeEnter(el: RendererElement) {\n    if (!el.dataset) el.dataset = {}\n\n    el.dataset.oldPaddingTop = el.style.paddingTop\n    el.dataset.oldPaddingBottom = el.style.paddingBottom\n    if (el.style.height) el.dataset.elExistsHeight = el.style.height\n\n    el.style.maxHeight = 0\n    el.style.paddingTop = 0\n    el.style.paddingBottom = 0\n  },\n\n  enter(el: RendererElement) {\n    requestAnimationFrame(() => {\n      el.dataset.oldOverflow = el.style.overflow\n      if (el.dataset.elExistsHeight) {\n        el.style.maxHeight = el.dataset.elExistsHeight\n      } else if (el.scrollHeight !== 0) {\n        el.style.maxHeight = `${el.scrollHeight}px`\n      } else {\n        el.style.maxHeight = 0\n      }\n\n      el.style.paddingTop = el.dataset.oldPaddingTop\n      el.style.paddingBottom = el.dataset.oldPaddingBottom\n      el.style.overflow = 'hidden'\n    })\n  },\n\n  afterEnter(el: RendererElement) {\n    el.style.maxHeight = ''\n    el.style.overflow = el.dataset.oldOverflow\n  },\n\n  enterCancelled(el: RendererElement) {\n    reset(el)\n  },\n\n  beforeLeave(el: RendererElement) {\n    if (!el.dataset) el.dataset = {}\n    el.dataset.oldPaddingTop = el.style.paddingTop\n    el.dataset.oldPaddingBottom = el.style.paddingBottom\n    el.dataset.oldOverflow = el.style.overflow\n\n    el.style.maxHeight = `${el.scrollHeight}px`\n    el.style.overflow = 'hidden'\n  },\n\n  leave(el: RendererElement) {\n    if (el.scrollHeight !== 0) {\n      el.style.maxHeight = 0\n      el.style.paddingTop = 0\n      el.style.paddingBottom = 0\n    }\n  },\n\n  afterLeave(el: RendererElement) {\n    reset(el)\n  },\n\n  leaveCancelled(el: RendererElement) {\n    reset(el)\n  },\n}\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}